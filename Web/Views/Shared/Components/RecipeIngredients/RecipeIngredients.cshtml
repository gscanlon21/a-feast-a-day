@model RecipeIngredientsViewModel
@using System.Numerics
@using Core.Models.Recipe
@using Core.Consts
@using Web.Controllers.RecipeIngredients

<div class="list-group">
    @foreach (var recipeIngredient in Model.UserRecipeIngredients)
    {
        <a asp-action="@nameof(RecipeIngredientController.ManageRecipeIngredient)" asp-controller="@RecipeIngredientController.Name"
           asp-route-recipeIngredientId="@recipeIngredient.RecipeIngredient.Id" asp-route-email="@Model.User.Email" asp-route-token="@Model.Token"
           class="list-group-item @(recipeIngredient.RecipeIngredient.Optional ? "list-group-item-dark" : "list-group-item-primary") list-group-item-action allow-demo">
            <div class="row gx-3 gy-1 justify-content-between">
                <div class="col-auto font-weight--bold">@(recipeIngredient.RecipeIngredient.Ingredient?.Name ?? recipeIngredient.RecipeIngredient.IngredientRecipe.Name)</div>
                @if (recipeIngredient.Ignore)
                {
                    <div class="col-auto d-flex align-items-center"><small class="badge bg-secondary rounded-pill">Ignored</small></div>
                } 
                else if (recipeIngredient.SubstituteIngredientId.HasValue || recipeIngredient.SubstituteRecipeId.HasValue)
                {
                    <div class="col-auto d-flex align-items-center">
                        <small class="badge bg-primary rounded-pill">@(recipeIngredient.SubstituteIngredient?.Name ?? recipeIngredient.SubstituteRecipe?.Name)</small>
                    </div>
                }
            </div>
            @if (!string.IsNullOrWhiteSpace(recipeIngredient.Notes))
            {
                <div><small>@recipeIngredient.Notes</small></div>
            }
        </a>
    }
</div>